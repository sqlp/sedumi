language: shell
notifications:
  email: false
jobs:
  include:
    - os: linux
      dist: xenial # 16.04 LTS, Octave 4.0.0
      before_install:
      - sudo apt-get -y install octave liboctave-dev libopenblas-dev
      addons:
        apt:
          update: true
      script: octave --eval "cd examples; test_sedumi(1, 1);"
    - os: linux
      dist: bionic # 18.04 LTS, Octave 4.2.2
      before_install:
      - sudo apt-get -y install octave liboctave-dev libopenblas-dev
      addons:
        apt:
          update: true
      script: octave --eval "cd examples; test_sedumi(1, 1);"
#    - os: osx
#      before_install:
#      - brew unlink python@2
#      - brew install octave
#      addons:
#        homebrew:
#          update: true
#      script: octave --eval "cd examples; test_sedumi(1, 1);"
    - os: windows
      script:
      - powershell Invoke-WebRequest -Uri https://ftpmirror.gnu.org/octave/windows/octave-5.2.0_1-w64.7z -OutFile octave-5.2.0_1-w64.7z
      - 7z x octave-5.2.0_1-w64.7z
      - cd octave-5.2.0-w64
      - dir
      - where post-install.bat
      - %cd%/post-install.bat
      - %cd%/octave-cli.exe --eval "cd ..; cd examples; test_sedumi(1, 1);"
